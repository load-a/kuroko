TEXT "Please enter your name: " $10		; Sets the prompt text

MOVE 10 I 								; Sets up the input parameter
MOVE 0 J								; Clears the output parameter
CALL :CHAR-COUNT 						; Counts the number of characters in the prompt

MOVE I J 								; Adds I (the address pointer) to the number of characters in the last string
PUSH J									; Saves this address onto the stack
TEXT "HELLO, " @6						; Greeting gets put at new address

MOVE J I								; Puts this address into I
MOVE 0 J								; Clears J for the function
CALL :CHAR-COUNT 						; J holds the character count for this too

MOVE I J								; Adds the character count to the string address pointer

OUT $10									; Displays Output prompt
IN @6									; Receives the user's name

POP A									; Retrieve the saved greeting address
OUT @0									; Output the greeting
OUT @6									; Output the user's name
HALT									; This is required to end execution before it falls into any subroutines

; This routine uses I as an input parameter and J as the output parameter
CHAR-COUNT:
	COMP 0 @5			; Compare the current character (value referenced by I) with zero (null)
	ZERO 4 				; Go to Return if null character
	INC I				; Otherwise, Increment address
	INC J				; and increment character count
	JUMP :CHAR-COUNT 	; Loop
	INC I 				; Sets the pointer to one after the last checked address before returning
	RTRN
